(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{9236:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/room/[roomName]",function(){return e(2124)}])},3100:function(n,t,e){"use strict";var r,o=e(5944),i=e(7357),u=e(8462),a=e(891),l=e(9953),c=e(5861),s=e(4381),d=e(3321),f=e(1163),m=e(7294),p=e(9253);function v(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function y(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,o,i=[],u=!0,a=!1;try{for(e=e.call(n);!(u=(r=e.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(l){a=!0,o=l}finally{try{u||null==e.return||e.return()}finally{if(a)throw o}}return i}}(n,t)||b(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(n){return function(n){if(Array.isArray(n))return v(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||b(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(n,t){if(n){if("string"===typeof n)return v(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(n,t):void 0}}t.Z=function(){var n=(0,f.useRouter)().query.roomName,t=y(m.useState(""),2),e=t[0],v=t[1],b=y(m.useState([]),2),x=b[0],Z=b[1],g=m.useRef(null);m.useEffect((function(){return(r=n?(0,p.ZP)("https://socketioserver-wmz2yik67q-uc.a.run.app/",{query:{roomName:n}}):(0,p.ZP)("https://socketioserver-wmz2yik67q-uc.a.run.app/")).on("updateMessage",(function(n){Z((function(t){return h(t).concat([n])}))})),r.on("newMember",(function(n){Z((function(t){return h(t).concat([n])}))})),r.on("exitMember",(function(n){Z((function(t){return h(t).concat([n])}))})),function(){return r.disconnect()}}),[n]),m.useEffect((function(){var n;null===(n=g.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),[x]);var w=function(n){if(n.preventDefault(),""!==e.trim()){var t={msg:e,sender:null===r||void 0===r?void 0:r.id,userId:null===r||void 0===r?void 0:r.id};r.emit("message",t,(function(n){Z((function(t){return h(t).concat([n])}))})),v("")}};return(0,o.BX)(i.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,o.BX)(u.Z,{sx:{border:"1px solid black",height:"60vh",overflowY:"auto",px:1,my:1},children:[x.map((function(n,t){return"server"!==n.sender?(0,o.tZ)(a.ZP,{children:(0,o.tZ)(l.Z,{primary:(0,o.tZ)(c.Z,{sx:{fontSize:"16px",fontWeight:"bold"},children:null===n||void 0===n?void 0:n.msg}),secondary:(0,o.tZ)(c.Z,{variant:"subtitle2",sx:{fontSize:"10px"},children:(null===n||void 0===n?void 0:n.userId)!==(null===r||void 0===r?void 0:r.id)?null===n||void 0===n?void 0:n.sender:"You"}),sx:{textAlign:(null===n||void 0===n?void 0:n.userId)===(null===r||void 0===r?void 0:r.id)?"end !important":"start !important",px:{md:5}}})},t):(0,o.tZ)(a.ZP,{children:(0,o.tZ)(l.Z,{primary:(0,o.tZ)(c.Z,{sx:{fontSize:"10px",fontWeight:"bold",bgcolor:"#70707040",display:"block",borderRadius:"10px",p:1},children:null===n||void 0===n?void 0:n.msg}),sx:{textAlign:"center !important"}})},t)})),(0,o.tZ)(i.Z,{ref:g})]}),(0,o.BX)(i.Z,{sx:{display:"flex",alignItems:"center",gap:2,my:2},children:[(0,o.tZ)(s.Z,{label:"Message",sx:{flexGrow:1},size:"small",value:e,onKeyPress:function(n){"Enter"===n.key&&w(n)},onChange:function(n){return v(n.target.value)}}),(0,o.tZ)(d.Z,{disabled:!e,variant:"contained",color:"primary",onClick:w,sx:{py:2,px:{md:5},height:"40px"},children:"Submit"})]})]})}},2124:function(n,t,e){"use strict";e.r(t);var r=e(5944),o=e(7294),i=e(5861),u=e(7357),a=e(1163),l=e(3100);t.default=function(){var n=(0,a.useRouter)().query.roomName;return(0,r.BX)(o.Fragment,{children:[(0,r.BX)(i.Z,{sx:{p:1,fontSize:"20px",fontWeight:"100",textAlign:"center"},children:["Room Name:",(0,r.tZ)(u.Z,{component:"span",sx:{fontSize:"20px",fontWeight:"bold",px:1},children:n})]}),(0,r.tZ)(l.Z,{})]})}}},function(n){n.O(0,[48,774,888,179],(function(){return t=9236,n(n.s=t);var t}));var t=n.O();_N_E=t}]);